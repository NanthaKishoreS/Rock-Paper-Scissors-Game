<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors</title>
    </head>
    <body>
        <p>Rock Paper Scissors</p>
        <button onclick="
            playGame('Rock');
        ">Rock</button>

        <button onclick="
            playGame('Paper');
        ">Paper</button>

        <button onclick="
            playGame('Scissors');
        ">Scissors</button>

        <button onclick="
            score.wins = 0;
            score.losses = 0;
            score.ties = 0;
            localStorage.removeItem(('score'));
        ">Reset Score</button>
        <script>

            const score= JSON.parse(localStorage.getItem('score'));

            if(score === null){
                score = {
                    wins:0,
                    losses :0,
                    ties:0
                };
            }

            function pcm(){
                const rn = Math.random();
                let cm = '';
                if(rn>=0 && rn<=1/3){
                    cm = 'Rock';
                }else if(rn>1/3 && rn<=2/3){
                    cm = 'Paper';
                }else{
                    cm = 'Scissors';
                } 
                return cm;
            }
            function playGame(playermove){
                let cm = pcm();
                let result = '';
                if(playermove === 'Rock'){
                    if(cm === 'Rock'){
                        result = 'Tie';
                    }
                    else if(cm === 'Paper'){
                        result = 'You Lose';
                    }
                    else{
                        result = 'You Win !!';
                    }
                } else if (playermove === 'Paper'){
                        if(cm === 'Rock'){
                            result = 'You Win !!';
                        }
                        else if(cm === 'Paper'){
                            result = 'Tie';
                        }
                        else{
                            result = 'You Lose';
                        }
                }else if(cm === 'Scissors'){
                    if(cm === 'Rock'){
                    result = 'You Lose';
                    }
                    else if(cm === 'Paper'){
                        result = 'You Win !!';
                    }
                    else{
                        result = 'Tie';
                    }
                } 

                if(result === 'You Win !!'){
                    score.wins = score.wins+1;
                } else if(result === 'You Lose'){
                    score.losses = score.losses+1;
                } else if(result === 'Tie'){
                    score.ties = score.ties+1;
                } 

                localStorage.setItem('score', JSON.stringify(score));

                alert(`You Picked ${playermove} Computer Picked ${cm}. ${result}\n Wins:${score.wins}  Losses:${score.losses}   Ties:${score.ties}`);                
            }
        </script>
    </body>
</html>
